{"token":"eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9.mBIlkB_VhO1TrOQ0PhPOvNlqN5Ko_1_E4VFmdObwdyMJKVNyt2yZjWxJvrLDLHxtTusisFuTUTorVFBQkVvHHhQpzqVUKhORbs5TDswrB2OS3casooUNFbB4R868e6cEaH3yglUiIKRZEDbthqx-f_7zOnf9wYZSMKrHpSld1xKoo6-1G1yNdJ7J_wH5k9ouVaWSMu1z956ELq_vRQycpL4_I51GRpz5vhMtufzQIeRq83Ewd_cyDKO8SHV7SAfAjMuXbj8CVwU-CrH7BzIhMcUUmDszIWBPB6_qFPzokmnWBdokWW7GNE9qLQKGd8Dk-Z3EMqSF332M0hOLDsU1Dw"}
{"token":"eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9.mBIlkB_VhO1TrOQ0PhPOvNlqN5Ko_1_E4VFmdObwdyMJKVNyt2yZjWxJvrLDLHxtTusisFuTUTorVFBQkVvHHhQpzqVUKhORbs5TDswrB2OS3casooUNFbB4R868e6cEaH3yglUiIKRZEDbthqx-f_7zOnf9wYZSMKrHpSld1xKoo6-1G1yNdJ7J_wH5k9ouVaWSMu1z956ELq_vRQycpL4_I51GRpz5vhMtufzQIeRq83Ewd_cyDKO8SHV7SAfAjMuXbj8CVwU-CrH7BzIhMcUUmDszIWBPB6_qFPzokmnWBdokWW7GNE9qLQKGd8Dk-Z3EMqSF332M0hOLDsU1Dw"}

管理员的token
{"token":"eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9.mBIlkB_VhO1TrOQ0PhPOvNlqN5Ko_1_E4VFmdObwdyMJKVNyt2yZjWxJvrLDLHxtTusisFuTUTorVFBQkVvHHhQpzqVUKhORbs5TDswrB2OS3casooUNFbB4R868e6cEaH3yglUiIKRZEDbthqx-f_7zOnf9wYZSMKrHpSld1xKoo6-1G1yNdJ7J_wH5k9ouVaWSMu1z956ELq_vRQycpL4_I51GRpz5vhMtufzQIeRq83Ewd_cyDKO8SHV7SAfAjMuXbj8CVwU-CrH7BzIhMcUUmDszIWBPB6_qFPzokmnWBdokWW7GNE9qLQKGd8Dk-Z3EMqSF332M0hOLDsU1Dw"}
eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9.mBIlkB_VhO1TrOQ0PhPOvNlqN5Ko_1_E4VFmdObwdyMJKVNyt2yZjWxJvrLDLHxtTusisFuTUTorVFBQkVvHHhQpzqVUKhORbs5TDswrB2OS3casooUNFbB4R868e6cEaH3yglUiIKRZEDbthqx-f_7zOnf9wYZSMKrHpSld1xKoo6-1G1yNdJ7J_wH5k9ouVaWSMu1z956ELq_vRQycpL4_I51GRpz5vhMtufzQIeRq83Ewd_cyDKO8SHV7SAfAjMuXbj8CVwU-CrH7BzIhMcUUmDszIWBPB6_qFPzokmnWBdokWW7GNE9qLQKGd8Dk-Z3EMqSF332M0hOLDsU1Dw

普通用户的token
eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ0ZXN0LXVzZXIiLCJleHAiOjE3MjQ0MDE0NTl9.k-bheiCBoszaKwpV5_pDO_08OpoWjofaroz-SOXytMCvGbv1uZ8un6qj-GQO54Jfwzz2IonDMCufOyyH-5VzeTNnObtAZkY4LEPea1TUG9fVIxgU6ibLJEKJqiI4AE2ECOuYDCcnYpZ-dn8ubRNct7DmfbRz7SfSrpRRMQOzU139VLqdYLZuSWBvAm2lbIpS3xU1yWClHNV3Ei_taotKzocycHp1JguUGKWlW7XPUkai_67YQJ8iWnMFxeUyVJuPsyqd1Pwy4ml6DLHTAaVVydMUuoHt99q5Q5wVcWOJgg1EcbWmQyljxfpRCf_9uRYPl_uOYElYFKW-hR0lXvlAAA

role 角色
bin/pulsar-admin \
--admin-url "http://hadoop102:8080/" \
--auth-params {"token":"eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9.mBIlkB_VhO1TrOQ0PhPOvNlqN5Ko_1_E4VFmdObwdyMJKVNyt2yZjWxJvrLDLHxtTusisFuTUTorVFBQkVvHHhQpzqVUKhORbs5TDswrB2OS3casooUNFbB4R868e6cEaH3yglUiIKRZEDbthqx-f_7zOnf9wYZSMKrHpSld1xKoo6-1G1yNdJ7J_wH5k9ouVaWSMu1z956ELq_vRQycpL4_I51GRpz5vhMtufzQIeRq83Ewd_cyDKO8SHV7SAfAjMuXbj8CVwU-CrH7BzIhMcUUmDszIWBPB6_qFPzokmnWBdokWW7GNE9qLQKGd8Dk-Z3EMqSF332M0hOLDsU1Dw"} \
--auth-plugin "org.apache.pulsar.client.impl.auth.AuthenticationToken" \
namespaces grant-permission public/default --role test-user --actions produce,consume



bin/pulsar tokens validate -pk  /opt/module/pulsar2-2.8.1/jwt-public.key -i "eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9.mBIlkB_VhO1TrOQ0PhPOvNlqN5Ko_1_E4VFmdObwdyMJKVNyt2yZjWxJvrLDLHxtTusisFuTUTorVFBQkVvHHhQpzqVUKhORbs5TDswrB2OS3casooUNFbB4R868e6cEaH3yglUiIKRZEDbthqx-f_7zOnf9wYZSMKrHpSld1xKoo6-1G1yNdJ7J_wH5k9ouVaWSMu1z956ELq_vRQycpL4_I51GRpz5vhMtufzQIeRq83Ewd_cyDKO8SHV7SAfAjMuXbj8CVwU-CrH7BzIhMcUUmDszIWBPB6_qFPzokmnWBdokWW7GNE9qLQKGd8Dk-Z3EMqSF332M0hOLDsU1Dw"


{sub=admin}

验证超级用户产生数据
bin/pulsar-client \
--url "pulsar://hadoop102:6650" \
--auth-plugin "org.apache.pulsar.client.impl.auth.AuthenticationToken" \
--auth-params {"token":"eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9.mBIlkB_VhO1TrOQ0PhPOvNlqN5Ko_1_E4VFmdObwdyMJKVNyt2yZjWxJvrLDLHxtTusisFuTUTorVFBQkVvHHhQpzqVUKhORbs5TDswrB2OS3casooUNFbB4R868e6cEaH3yglUiIKRZEDbthqx-f_7zOnf9wYZSMKrHpSld1xKoo6-1G1yNdJ7J_wH5k9ouVaWSMu1z956ELq_vRQycpL4_I51GRpz5vhMtufzQIeRq83Ewd_cyDKO8SHV7SAfAjMuXbj8CVwU-CrH7BzIhMcUUmDszIWBPB6_qFPzokmnWBdokWW7GNE9qLQKGd8Dk-Z3EMqSF332M0hOLDsU1Dw"} \
produce public/default/test-token -m "hello pulsar" -n 10


验证普通用户产生数据
bin/pulsar-client \
--url "pulsar://hadoop102:6650" \
--auth-plugin "org.apache.pulsar.client.impl.auth.AuthenticationToken" \
--auth-params {"token":"eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ0ZXN0LXVzZXIiLCJleHAiOjE3MjQ0MDE0NTl9.k-bheiCBoszaKwpV5_pDO_08OpoWjofaroz-SOXytMCvGbv1uZ8un6qj-GQO54Jfwzz2IonDMCufOyyH-5VzeTNnObtAZkY4LEPea1TUG9fVIxgU6ibLJEKJqiI4AE2ECOuYDCcnYpZ-dn8ubRNct7DmfbRz7SfSrpRRMQOzU139VLqdYLZuSWBvAm2lbIpS3xU1yWClHNV3Ei_taotKzocycHp1JguUGKWlW7XPUkai_67YQJ8iWnMFxeUyVJuPsyqd1Pwy4ml6DLHTAaVVydMUuoHt99q5Q5wVcWOJgg1EcbWmQyljxfpRCf_9uRYPl_uOYElYFKW-hR0lXvlAAA"} \
produce public/default/test-token -m "hello pulsar" -n 10
消费者


验证普通消费者消费数据

bin/pulsar-client \
--url "pulsar://hadoop102:6650" \
--auth-plugin "org.apache.pulsar.client.impl.auth.AuthenticationToken" \
--auth-params {"token":"eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ0ZXN0LXVzZXIiLCJleHAiOjE3MjQ0MDE0NTl9.k-bheiCBoszaKwpV5_pDO_08OpoWjofaroz-SOXytMCvGbv1uZ8un6qj-GQO54Jfwzz2IonDMCufOyyH-5VzeTNnObtAZkY4LEPea1TUG9fVIxgU6ibLJEKJqiI4AE2ECOuYDCcnYpZ-dn8ubRNct7DmfbRz7SfSrpRRMQOzU139VLqdYLZuSWBvAm2lbIpS3xU1yWClHNV3Ei_taotKzocycHp1JguUGKWlW7XPUkai_67YQJ8iWnMFxeUyVJuPsyqd1Pwy4ml6DLHTAaVVydMUuoHt99q5Q5wVcWOJgg1EcbWmQyljxfpRCf_9uRYPl_uOYElYFKW-hR0lXvlAAA"} \
consume public/default/test-token -n 100 -s "pulsar-consumer"

验证成功，消费到了数据